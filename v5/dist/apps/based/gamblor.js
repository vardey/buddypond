const t={};t.endpoint=buddypond.gamblorEndpoint,t.apiRequest=async(e,o="GET",n=null)=>{const i={method:o};let a={Accept:"application/json","Content-Type":"application/json; charset=utf-8","X-Me":buddypond.me};buddypond.qtokenid&&(a.Authorization=`Bearer ${buddypond.qtokenid}`),n&&(i.body=JSON.stringify(n)),i.headers=a;let s=`${t.endpoint}${e}`;console.log("admin client making api request",s,i);try{const t=await fetch(s,i);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(t){throw console.error("Error in API request:",t),t}};class e{constructor(t,e={}){return this.bp=t,this}async init(){return this.bp.log("Hello from Gamblor"),this.client=t,await this.bp.load("/v5/apps/based/gamblor/gamblor.css"),this.html=await this.bp.load("/v5/apps/based/gamblor/gamblor.html"),this}async open(){this.gamblorWindow=this.bp.apps.ui.windowManager.createWindow({id:"casino",title:"Hello Gamblor",x:50,y:100,width:400,height:300,minWidth:200,minHeight:200,icon:"desktop/assets/images/icons/icon_admin_64.png",parent:$("#desktop")[0],content:this.html,resizable:!0,minimizable:!0,maximizable:!0,closable:!0,focusable:!0,maximized:!1,minimized:!1});let t=(await this.client.apiRequest("/bets","GET")).results||[];return console.log("bets result",t),$(".gamblor-bets-table body",this.gamblorWindow.content).empty(),t.forEach((t=>{console.log("bet",t);let e=`<tr>\n                <td>${t.id}</td>\n                <td>${t.owner}</td>\n                <td>${t.type}</td>\n                <td>${t.symbol}</td>\n                <td>${t.amount}</td>\n                <td>${t.status}</td>\n                <td>${t.max_participants}</td>\n                <td>${t.participants_count}</td>\n                <td>${t.ctime} ${new Date(t.ctime).toLocaleString()}</td>\n            </tr>`;$(".gamblor-bets-table tbody",this.gamblorWindow.content).append(e)})),this.gamblorWindow}}export{e as default};
//# sourceMappingURL=gamblor.js.map
