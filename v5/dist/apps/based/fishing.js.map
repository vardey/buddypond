{"version":3,"file":"fishing.js","sources":["../../../apps/based/fishing/lib/data/Fish.js","../../../apps/based/fishing/lib/data/Mutations.js","../../../apps/based/fishing/lib/data/Items.js","../../../apps/based/fishing/lib/api.js","../../../apps/based/fishing/fishing.js"],"sourcesContent":["export default [\n  // 🐟 Common Fish\n  {\n    name: \"Common Carp\",\n    rarity: \"common\",\n    weight: 60,\n    minWeight: 1,\n    maxWeight: 5,\n    baseValue: 10,\n  },\n  {\n    name: \"Bluegill\",\n    rarity: \"common\",\n    weight: 50,\n    minWeight: 0.5,\n    maxWeight: 2,\n    baseValue: 8,\n  },\n  {\n    name: \"Smallmouth Bass\",\n    rarity: \"common\",\n    weight: 45,\n    minWeight: 1,\n    maxWeight: 4,\n    baseValue: 12,\n  },\n  {\n    name: \"Perch\",\n    rarity: \"common\",\n    weight: 40,\n    minWeight: 0.5,\n    maxWeight: 1.5,\n    baseValue: 9,\n  },\n\n  // 🐠 Uncommon Fish\n  {\n    name: \"Spotted Trout\",\n    rarity: \"uncommon\",\n    weight: 25,\n    minWeight: 2,\n    maxWeight: 7,\n    baseValue: 25,\n  },\n  {\n    name: \"Catfish\",\n    rarity: \"uncommon\",\n    weight: 20,\n    minWeight: 3,\n    maxWeight: 10,\n    baseValue: 30,\n  },\n  {\n    name: \"Koi\",\n    rarity: \"uncommon\",\n    weight: 18,\n    minWeight: 2,\n    maxWeight: 5,\n    baseValue: 40,\n  },\n  {\n    name: \"Lionfish\",\n    rarity: \"uncommon\",\n    weight: 15,\n    minWeight: 1,\n    maxWeight: 3,\n    baseValue: 35,\n  },\n\n  // 🦈 Rare Fish\n  {\n    name: \"Electric Eel\",\n    rarity: \"rare\",\n    weight: 10,\n    minWeight: 5,\n    maxWeight: 15,\n    baseValue: 100,\n  },\n  {\n    name: \"Hammerhead Shark\",\n    rarity: \"rare\",\n    weight: 7,\n    minWeight: 20,\n    maxWeight: 50,\n    baseValue: 200,\n  },\n  {\n    name: \"Giant Squid\",\n    rarity: \"rare\",\n    weight: 5,\n    minWeight: 80,\n    maxWeight: 150,\n    baseValue: 300,\n  },\n  {\n    name: \"Ghost Fish\",\n    rarity: \"rare\",\n    weight: 4,\n    minWeight: 1,\n    maxWeight: 3,\n    baseValue: 500,\n  },\n\n  // 🧜‍♂️ Legendary Sea Creatures\n  {\n    name: \"Ancient Leviathan\",\n    rarity: \"legendary\",\n    weight: 1,\n    minWeight: 100,\n    maxWeight: 300,\n    baseValue: 1000,\n  },\n  {\n    name: \"Sea Serpent\",\n    rarity: \"legendary\",\n    weight: 0.5,\n    minWeight: 120,\n    maxWeight: 400,\n    baseValue: 1500,\n  },\n  {\n    name: \"Kraken\",\n    rarity: \"legendary\",\n    weight: 0.3,\n    minWeight: 200,\n    maxWeight: 600,\n    baseValue: 2000,\n  },\n  {\n    name: \"Mermaid\",\n    rarity: \"legendary\",\n    weight: 0.2,\n    minWeight: 50,\n    maxWeight: 100,\n    baseValue: 2500,\n  },\n  {\n    name: \"Coelacanth\",\n    rarity: \"legendary\",\n    weight: 0.1,\n    minWeight: 5,\n    maxWeight: 20,\n    baseValue: 3000,\n  }\n];\n","export default [\n  // Original Mutations\n  {\n    name: \"gold\",\n    chance: 0.05, // 5%\n    valueMultiplier: 2.0,\n    effect: \"shiny and valuable\"\n  },\n  {\n    name: \"rainbow\",\n    chance: 0.02,\n    valueMultiplier: 3.0,\n    effect: \"magical shimmer\"\n  },\n  {\n    name: \"chrome\",\n    chance: 0.01,\n    valueMultiplier: 4.0,\n    effect: \"ultra reflective\"\n  },\n  {\n    name: \"radioactive\",\n    chance: 0.005,\n    valueMultiplier: 5.0,\n    effect: \"glows in the dark\"\n  },\n  {\n    name: \"neon\",\n    chance: 0.04,\n    valueMultiplier: 2.5,\n    effect: \"glows with highlighter colors\"\n  },\n  {\n    name: \"glitched\",\n    chance: 0.01,\n    valueMultiplier: 4.5,\n    effect: \"flickers and warps reality\"\n  },\n  {\n    name: \"frozen\",\n    chance: 0.03,\n    valueMultiplier: 2.2,\n    effect: \"encased in shimmering ice\"\n  },\n  {\n    name: \"angelic\",\n    chance: 0.003,\n    valueMultiplier: 6.0,\n    effect: \"radiates holy light and song\"\n  },\n  {\n    name: \"demonic\",\n    chance: 0.002,\n    valueMultiplier: 6.66,\n    effect: \"burns with infernal flame\"\n  },\n  {\n    name: \"holographic\",\n    chance: 0.01,\n    valueMultiplier: 3.5,\n    effect: \"projects a translucent double\"\n  },\n  {\n    name: \"void\",\n    chance: 0.0005,\n    valueMultiplier: 10.0,\n    effect: \"emanates pure cosmic darkness\"\n  },\n  {\n    name: \"pixelated\",\n    chance: 0.007,\n    valueMultiplier: 2.1,\n    effect: \"looks like it's from an 8-bit world\"\n  },\n  {\n    name: \"royal\",\n    chance: 0.009,\n    valueMultiplier: 3.75,\n    effect: \"wears a tiny golden crown\"\n  },\n  {\n    name: \"haunted\",\n    chance: 0.001,\n    valueMultiplier: 9.0,\n    effect: \"moans softly and flickers with ghostly energy\"\n  }\n];\n","export default {\n  // 🎣 Rods & Tools\n  \"golden rod\": {\n    rarity: \"legendary\",\n    rarityBoost: {\n      rare: 1.5,\n      legendary: 2.0\n    },\n    mutationBoost: 0.02,\n    durability: 10\n  },\n\n  \"basic rod\": {\n    rarity: \"common\",\n    rarityBoost: {},\n    mutationBoost: 0,\n    description: \"A worn-out but trusty fishing rod. No bonuses.\",\n    durability: 20\n  },\n\n  \"reinforced rod\": {\n    rarity: \"uncommon\",\n    rarityBoost: {\n      uncommon: 1.25,\n      rare: 1.1\n    },\n    mutationBoost: 0.005,\n    description: \"Slightly increases the chance of catching rare fish.\",\n    durability: 25\n  },\n\n  \"cyber rod\": {\n    rarity: \"epic\",\n    rarityBoost: {\n      rare: 1.4,\n      legendary: 1.5\n    },\n    mutationBoost: 0.03,\n    description: \"A futuristic rod with scanning tech for rare catches.\",\n    durability: 15\n  },\n\n  // 🪱 Baits & Boosters\n  \"bait\": {\n    rarity: \"common\",\n    rarityBoost: {\n      uncommon: 1.25,\n      rare: 1.25\n    },\n    mutationBoost: 0.01,\n    durability: 5\n  },\n\n  \"radioactive bait\": {\n    rarity: \"rare\",\n    rarityBoost: {\n      rare: 1.2\n    },\n    mutationBoost: 0.05,\n    description: \"Fish seem unnaturally drawn to its toxic glow.\",\n    durability: 3\n  },\n\n  \"mystery chum\": {\n    rarity: \"uncommon\",\n    rarityBoost: {\n      rare: 1.1,\n      legendary: 1.1\n    },\n    mutationBoost: 0.01,\n    description: \"Smells... suspicious. Increases odds for strange results.\",\n    durability: 2\n  },\n\n  // 🎩 Wearables\n  \"lucky hat\": {\n    rarity: \"uncommon\",\n    mutationBoost: 0.05,\n    description: \"Increases the chance of catching mutated fish by 5%\",\n    durability: 15\n  },\n\n  \"pirate eyepatch\": {\n    rarity: \"rare\",\n    rarityBoost: {\n      rare: 1.3\n    },\n    description: \"Channel your inner pirate. Boosts rare catch odds.\",\n    mutationBoost: 0.01,\n    durability: 20\n  },\n\n  \"angler's cloak\": {\n    rarity: \"epic\",\n    rarityBoost: {\n      legendary: 1.5\n    },\n    description: \"A cloak said to be worn by the Sea King. Doubles legendary odds at night.\",\n    mutationBoost: 0.02,\n    durability: 10\n  },\n\n  // 💍 Charms & Trinkets\n  \"lucky coin\": {\n    rarity: \"uncommon\",\n    mutationBoost: 0.03,\n    description: \"Keeps turning up heads. Boosts mutation chances slightly.\",\n    durability: 30\n  },\n\n  \"cursed charm\": {\n    rarity: \"rare\",\n    rarityBoost: {\n      rare: 1.1,\n      legendary: 1.3\n    },\n    mutationBoost: 0.06,\n    description: \"Increases rare and mutation odds, but makes fish harder to reel in.\",\n    durability: 8\n  },\n\n  \"totem of the deep\": {\n    rarity: \"legendary\",\n    rarityBoost: {\n      rare: 2.0,\n      legendary: 2.0\n    },\n    mutationBoost: 0.05,\n    description: \"Summons the favor of deep-sea spirits. Powerful, but fragile.\",\n    durability: 3\n  }\n};\n","import fishList from './data/Fish.js';\nimport mutationList from './data/Mutations.js';\nimport items from './data/Items.js';\n\nconst ITEM_DROP_CHANCE = 0.05; // 5% chance to get a random modifier instead of a fish\nconst droppableitems = Object.keys(items); // drop any modifier defined in items.js\n\nlet fishing = {};\nfishing.Fish = fishList;\nfishing.Mutations = mutationList;\nfishing.Items = items;\n\n// --- SEEDABLE RANDOM SETUP ---\nlet rng = Math.random;\n\nfishing.setRandomSeed = function (seed) {\n  if (typeof seed !== 'number') {\n    throw new Error('Seed must be a number');\n  }\n  console.log(`Setting fishing random seed to ${seed}`);\n  rng = function rng() {\n    console.log(`Setting random seed to ${seed}`);\n    let state = seed >>> 0; // force to uint32\n\n    // LCG parameters from Numerical Recipes\n    state = (1664525 * state + 1013904223) >>> 0;\n    let res = state / 0x100000000; // scale to [0, 1)\n    console.log(`Generated random number: ${res}`);\n    return res;\n  }\n};\n\nfishing.clearRandomSeed = function () {\n  rng = Math.random;\n};\n\n// --- LOGIC ---\nfishing.weightedRandom = function (items, weightKey = 'weight', weightsOverride = {}) {\n  const total = items.reduce((acc, item) => {\n    const override = weightsOverride[item.rarity] || 1;\n    return acc + item[weightKey] * override;\n  }, 0);\n\n  const rand = rng() * total;\n  let acc = 0;\n\n  for (const item of items) {\n    const override = weightsOverride[item.rarity] || 1;\n    acc += item[weightKey] * override;\n    if (rand < acc) return item;\n  }\n};\n\nfishing.rollMutation = function (boost = 0) {\n  for (const mutation of mutationList) {\n    const totalChance = mutation.chance + boost;\n    if (rng() < totalChance) return mutation;\n  }\n  return null;\n};\n\nfishing.castFishingLine = function (itemsInput = []) {\n  if (rng() < ITEM_DROP_CHANCE) {\n    const randomItem = droppableitems[Math.floor(rng() * droppableitems.length)];\n    return {\n      type: 'item',\n      name: randomItem,\n      rarity: items[randomItem]?.rarity,\n      metadata: items[randomItem] || {},\n      durability: items[randomItem]?.durability || 0,\n      description: items[randomItem]?.effect || 'A useful fishing item!',\n      itemsUsed: itemsInput\n    };\n  }\n\n  // Boosts\n  let rarityBoost = {};\n  let mutationBoost = 0;\n\n  for (const modName of itemsInput) {\n    const mod = items[modName];\n    if (!mod) continue;\n    if (mod.rarityBoost) {\n      for (const [rarity, boost] of Object.entries(mod.rarityBoost)) {\n        rarityBoost[rarity] = (rarityBoost[rarity] || 1) * boost;\n      }\n    }\n    if (mod.mutationBoost) {\n      mutationBoost += mod.mutationBoost;\n    }\n  }\n\n  const fish = fishing.weightedRandom(fishList, 'weight', rarityBoost);\n  const mutation = fishing.rollMutation(mutationBoost);\n  const weight = (\n    rng() * (fish.maxWeight - fish.minWeight) + fish.minWeight\n  ).toFixed(2);\n\n  const valueMultiplier = mutation ? mutation.valueMultiplier : 1.0;\n  const value = Math.round(fish.baseValue * valueMultiplier * weight);\n\n  return {\n    type: 'fish',\n    name: fish.name,\n    rarity: fish.rarity,\n    weight: parseFloat(weight),\n    mutation: mutation ? mutation.name : null,\n    value,\n    description: mutation ? mutation.effect : null,\n    itemsUsed: itemsInput\n  };\n};\n\nexport default fishing;\n","import api from './lib/api.js';\n\nexport default class Fishing {\n  // constructor is required, it is called when the app is loaded\n  constructor(bp, options = {}) {\n    this.bp = bp;\n    this.options = options;\n    return this;\n  }\n\n  // init is required, it is called when the app is opened or initialized\n  async init() {\n    this.html = await this.bp.load('/v5/apps/based/fishing/fishing.html');\n    await this.bp.load('/v5/apps/based/fishing/fishing.css');\n    await this.bp.appendScript('https://cdn.jsdelivr.net/npm/chart.js');\n\n    return 'loaded Fishing';\n  }\n\n  async open() {\n    if (!this.win) {\n      this.win = await this.bp.window(this.window());\n\n\n      const fishData = api.Fish;\n\n      console.log('Fish data loaded:', fishData);\n\n      // Count fish by rarity\n      const rarityCounts = fishData.reduce((acc, fish) => {\n        acc[fish.rarity] = (acc[fish.rarity] || 0) + 1;\n        return acc;\n      }, {});\n\n      console.log('Fish counts by rarity:', rarityCounts);\n      new Chart(document.getElementById('fishing-chart-fish-rarity'), {\n        type: 'doughnut',\n        data: {\n          labels: Object.keys(rarityCounts),\n          datasets: [{\n            data: Object.values(rarityCounts),\n            backgroundColor: ['#4caf50', '#2196f3', '#9c27b0', '#ff9800']\n          }]\n        },\n        options: {\n          plugins: {\n            title: {\n              display: true,\n              text: 'Fish Distribution by Rarity'\n            }\n          }\n        }\n      });\n\n      console.log('Fishing window opened', api);\n\n    }\n    return this.win;\n  }\n\n  window() {\n\n    return {\n      id: 'fishing',\n      title: 'Fishing',\n      icon: 'desktop/assets/images/icons/icon_buddy-frog_64.webp',\n      position: 'center',\n      parent: $('#desktop')[0],\n      width: 850,\n      height: 600,\n      content: this.html,\n      resizable: true,\n      closable: true,\n      onClose: () => {\n        this.win = null;\n      }\n    }\n  }\n}\n"],"names":["fishList","name","rarity","weight","minWeight","maxWeight","baseValue","mutationList","chance","valueMultiplier","effect","items","rarityBoost","rare","legendary","mutationBoost","durability","description","uncommon","bait","droppableitems","Object","keys","fishing","Fish","Mutations","Items","rng","Math","random","setRandomSeed","seed","Error","console","log","state","res","clearRandomSeed","weightedRandom","weightKey","weightsOverride","total","reduce","acc","item","override","rand","rollMutation","boost","mutation","totalChance","castFishingLine","itemsInput","randomItem","floor","length","type","metadata","itemsUsed","modName","mod","entries","fish","toFixed","value","round","parseFloat","Fishing","constructor","bp","options","this","init","html","load","appendScript","open","win","window","fishData","api","rarityCounts","Chart","document","getElementById","data","labels","datasets","values","backgroundColor","plugins","title","display","text","id","icon","position","parent","$","width","height","content","resizable","closable","onClose"],"mappings":"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"}