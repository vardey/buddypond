{"version":3,"file":"image-card.js","sources":["../../../../../../apps/based/card/cards/image/image-card.js"],"sourcesContent":["export default function applyData(el, data, cardClass, parentWindow) {\n    const $el = $(el);\n\n    // replace the URL in the message text since the image card will handle it as embed\n    // this allows a message with an image URL to be sent without the URL showing up in the chat\n    data.message.text = data.message.text.replace(data.url, '');\n\n    const $image = $el.find('.image-image');\n\n    // add onload event to image\n    $image.on('load', function () {\n        if (cardClass.bp && cardClass.bp.apps && cardClass.bp.apps.buddylist) {\n            cardClass.bp.apps.buddylist.scrollToBottom(parentWindow.content);\n        }\n    });\n    $image.attr('src', data.url);\n\n    // ðŸ†• Lightbox click\n    $image.on('click', () => {\n        this.bp.apps.ui.showLightBox(data.url);\n    });\n\n  \n    // TODO: replace this with data.message.chatId in the future\n    if (data.message.type === 'pond') {\n        $el.find('.remixPaint').data('output', data.message.type);\n        $el.find('.remixPaint').data('context', data.message.to);\n    } else {\n        $el.find('.remixPaint').data('output', data.message.type);\n        // Remark: Temporary solution to get context for legacy paint app\n        // In the future we can simply user the chatId to get the correct target context\n        if (data.message.from === this.bp.me) {\n            $el.find('.remixPaint').data('context', data.message.to);\n        } else {\n            $el.find('.remixPaint').data('context', data.message.from);\n        }\n    }\n\n  }"],"names":["applyData","el","data","cardClass","parentWindow","$el","$","message","text","replace","url","$image","find","on","bp","apps","buddylist","scrollToBottom","content","attr","this","ui","showLightBox","type","to","from","me"],"mappings":"AAAe,SAASA,EAAUC,EAAIC,EAAMC,EAAWC,GACnD,MAAMC,EAAMC,EAAEL,GAIdC,EAAKK,QAAQC,KAAON,EAAKK,QAAQC,KAAKC,QAAQP,EAAKQ,IAAK,IAExD,MAAMC,EAASN,EAAIO,KAAK,gBAGxBD,EAAOE,GAAG,QAAQ,WACVV,EAAUW,IAAMX,EAAUW,GAAGC,MAAQZ,EAAUW,GAAGC,KAAKC,WACvDb,EAAUW,GAAGC,KAAKC,UAAUC,eAAeb,EAAac,QAEpE,IACIP,EAAOQ,KAAK,MAAOjB,EAAKQ,KAGxBC,EAAOE,GAAG,SAAS,KACfO,KAAKN,GAAGC,KAAKM,GAAGC,aAAapB,EAAKQ,QAKZ,SAAtBR,EAAKK,QAAQgB,MACblB,EAAIO,KAAK,eAAeV,KAAK,SAAUA,EAAKK,QAAQgB,MACpDlB,EAAIO,KAAK,eAAeV,KAAK,UAAWA,EAAKK,QAAQiB,MAErDnB,EAAIO,KAAK,eAAeV,KAAK,SAAUA,EAAKK,QAAQgB,MAGhDrB,EAAKK,QAAQkB,OAASL,KAAKN,GAAGY,GAC9BrB,EAAIO,KAAK,eAAeV,KAAK,UAAWA,EAAKK,QAAQiB,IAErDnB,EAAIO,KAAK,eAAeV,KAAK,UAAWA,EAAKK,QAAQkB,MAIjE"}