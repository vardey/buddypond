class e{constructor(e){this.bp=e}async init(){return await this.bp.appendScript("/v5/apps/based/buddylist/vendor/emoji.min.js"),await this.bp.appendScript("/v5/apps/based/emoji-picker/vendor/grapheme-splitter.min.js"),this.jQueryPlugin(),"loaded emoji picker"}jQueryPlugin(){let e=null,i=null,o=!1;const t={autoShow:!0,onSelect:e=>{},categories:["people","nature","food","activity","travel","objects","symbols","flags"],emojiData:EMOJIS};function n(o,t=""){if(!e)return;const n=e.find(".emoji-grid"),s=(t||e.find(".emoji-search").val()||"").toLowerCase();n.empty();var a;(a=o.emojiData,Object.entries(a||{}).map((([e,i])=>({emoji:e,keywords:i,name:i[0]||"",search:(i.join(" ")+" "+e).toLowerCase()})))).filter((e=>e.search.includes(s))).slice(0,200).forEach((t=>{const s=$(`<button class="emoji-btn" type="button" style="border:none;background:none;cursor:pointer;padding:2px;">${t.emoji}</button>`);s.attr("title",t.name||t.keywords.join(", ")),s.on("click",(()=>{o.onSelect(t.emoji),e.hide(),i=null})),n.append(s)}))}function s(t){const s=t.data("emojiPicker-settings");if(e||(e=$('\n      <div class="emoji-picker-popup" style="position:absolute;z-index:9999;display:none;width:260px;border:1px solid #ccc;border-radius:6px;box-shadow:0 2px 10px rgba(0,0,0,0.15);background:var(--desktop_element-background);">\n        <input type="text" class="emoji-search" placeholder="Search..." style="width:100%;padding:6px;border:none;border-bottom:1px solid #eee;box-sizing:border-box;" />\n        <div class="emoji-grid" style="max-height:200px;min-height:200px;overflow-y:auto;padding:6px;display:flex;flex-wrap:wrap;align-items:start;gap:6px;font-size:20px;"></div>\n      </div>\n    '),e.on("click",(e=>e.stopPropagation())),e.find(".emoji-search").on("input",(()=>{i&&n(i.data("emojiPicker-settings"))})),$("body").append(e),o||($(document).off("click.emojiPickerGlobal").on("click.emojiPickerGlobal",(o=>{e&&($(o.target).closest(".emoji-picker-popup").length||i&&(i.is(o.target)||$.contains(i[0],o.target))||(e.hide(),i=null))})),o=!0)),i&&i[0]===t[0]&&e.is(":visible"))return e.hide(),void(i=null);i=t,e.css({left:-9999,top:-9999,display:"block"}),n(s);const a=t.offset(),r=t.outerHeight(),c=e.outerHeight(),l=a.left,p=a.top-c-8;e.css({left:l,top:p<0?a.top+r+8:p,display:"block"}),e.find(".emoji-search").focus()}$.fn.emojiPicker=function(n){if("string"==typeof n){const t=n;return"hide"===t?(e&&e.hide(),i=null,this):"destroy"===t?(e&&(e.remove(),e=null,i=null,$(document).off("click.emojiPickerGlobal"),o=!1),this):"show"===t||"toggle"===t?this.each((function(){s($(this))})):this}const a=$.extend(!0,{},t,n||{});return this.each((function(){const e=$(this);e.data("emojiPicker-settings",a),e.off("click.emojiPicker").on("click.emojiPicker",(function(i){i.stopPropagation(),s(e)})),a.autoShow&&s(e)}))}}}export{e as default};
//# sourceMappingURL=emoji-picker.js.map
